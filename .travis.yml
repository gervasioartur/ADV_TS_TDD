language: node_js
node_js:
    - 16
before_script:
    - yarn install
script:
    - eslint 'src/**'
    - yarn test:coveralls
    - docker login --username $HEROKU_DOCKER_USERNAME --password $HEROKU_API_KEY registry.heroku.com
    - docker-compose build

deploy:
    - provider: script
      script: bash ./deploy.sh
      on:
          branch: master

